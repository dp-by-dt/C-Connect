{% extends "base.html" %}
{% block title %}Contact{% endblock %}
{% block body %}
<div class="container py-5">
    <div class="text-center mb-5 animate-on-scroll">
        <h1 class="page-title">Get in <span class="text-gradient">Touch</span></h1>
        <p class="page-subtitle">We'd love to hear from you, {{ name }}!</p>
    </div>
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="row g-4">
                <div class="col-lg-4 animate-on-scroll">
                    <div class="glass-card p-4 text-center mb-4">
                        <div style="width: 70px; height: 70px; margin: 0 auto 1.5rem; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">
                            <i class="bi bi-envelope-fill"></i>
                        </div>
                        <h4>Email Us</h4>
                        <p class="text-muted">support@cconnect.campus.edu</p>
                        <a href="mailto:support@cconnect.campus.edu" class="btn btn-sm btn-outline-custom">Send Email</a>
                    </div>
                </div>
                <div class="col-lg-8 animate-on-scroll">
                    <div class="glass-card p-4">
                        <h3 class="mb-4"><i class="bi bi-pencil-square me-2"></i>Send us a Message</h3>
                        <form id="contactForm" class="needs-validation" novalidate>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label">Your Name</label>
                                    <input type="text" class="form-control" id="name" name="name" placeholder="John Doe" required>
                                    <div class="invalid-feedback">Please enter your name.</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" placeholder="you@campus.edu" {% if current_user.is_authenticated %}value="{{ current_user.email }}"{% endif %} required>
                                    <div class="invalid-feedback">Please enter a valid email.</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="subject" class="form-label">Subject</label>
                                <select class="form-select" id="subject" name="subject" required>
                                    <option value="">Choose a topic...</option>
                                    <option value="general">General Inquiry</option>
                                    <option value="support">Technical Support</option>
                                    <option value="feedback">Feedback & Suggestions</option>
                                    <option value="bug">Report a Bug</option>
                                    <option value="feature">Feature Request</option>
                                </select>
                                <div class="invalid-feedback">Please select a subject.</div>
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">Message</label>
                                <textarea class="form-control" id="message" name="message" rows="6" placeholder="Tell us more..." required></textarea>
                                <div class="invalid-feedback">Please enter your message.</div>
                                <div class="form-text"><span id="charCount">0</span>/500 characters</div>
                            </div>
                            <button type="submit" class="btn btn-primary-custom w-100" id="submitBtn">
                                <i class="bi bi-send me-2"></i>Send Message
                            </button>
                        </form>
                        <div id="successMessage" class="alert alert-success mt-4" style="display: none;">
                            <i class="bi bi-check-circle me-2"></i><strong>Message sent!</strong> We'll get back to you soon.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
const messageInput = document.getElementById('message');
const charCount = document.getElementById('charCount');
if (messageInput && charCount) {
    messageInput.addEventListener('input', function() {
        const count = this.value.length;
        charCount.textContent = count;
        if (count > 500) {
            this.value = this.value.substring(0, 500);
            charCount.textContent = 500;
        }
    });
}
const contactForm = document.getElementById('contactForm');
if (contactForm) {
    contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (this.checkValidity()) {
            const submitBtn = document.getElementById('submitBtn');
            const originalText = window.cconnect.showLoading(submitBtn);
            setTimeout(() => {
                window.cconnect.hideLoading(submitBtn, originalText);
                document.getElementById('successMessage').style.display = 'block';
                this.reset();
                charCount.textContent = '0';
                setTimeout(() => {
                    document.getElementById('successMessage').style.display = 'none';
                }, 5000);
            }, 1500);
        }
        this.classList.add('was-validated');
    });
}
</script>
{% endblock %}