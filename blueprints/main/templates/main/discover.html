{% extends "base.html" %}
{% block title %}Discover{% endblock %}
{% block body %}
<div class="container py-4">
    <div class="glass-card text-center p-4 mb-4 animate-on-scroll">
        <h1 class="page-title mb-3"><i class="bi bi-compass me-2"></i>Discover Your Community</h1>
        <p class="page-subtitle mb-4">Find students with similar interests and expand your network</p>
        <div style="max-width: 600px; margin: 0 auto;">
            <div style="position: relative;">
                <i class="bi bi-search" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-muted);"></i>
                <input type="text" class="form-control" id="searchInput" placeholder="Search by name or interest..." style="padding-left: 3rem;">
            </div>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
        {% if users %}
            {% for user in users %}
            <div class="glass-card p-4 text-center">
                <div style="width: 100px; height: 100px; margin: 0 auto 1rem; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 700; color: white;">
                    {{ user.username[0].upper() }}
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.25rem;">{{ user.username }}</h3>
                <p class="text-muted" style="font-size: 0.875rem; margin-bottom: 1rem;">{{ user.email }}</p>
                <div style="display: flex; gap: 0.5rem; justify-content: center;">
                    <form method="POST" action="{{ url_for('connections.connections_send', target_id=user.id) }}">
                        
                    {# the csrf_token() #}
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                    <button class="btn btn-primary-custom btn-sm" onclick="window.cconnect.showToast('Feature coming soon!', 'info')">
                        <i class="bi bi-person-plus"></i> Connect
                    </button>
                </form>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center py-5" style="grid-column: 1 / -1;">
                <div class="glass-card p-5">
                    <i class="bi bi-people" style="font-size: 4rem; color: var(--text-muted); opacity: 0.5;"></i>
                    <h3 class="mt-3 text-muted">No users found</h3>
                    <p class="text-muted">Complete your profile to get personalized suggestions</p>
                    <a href="{{ url_for('auth.profile') }}" class="btn btn-primary-custom mt-3">
                        <i class="bi bi-pencil me-2"></i>Complete Profile
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}